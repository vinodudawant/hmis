tinymce.PluginManager
		.add(
				"print",
				function(t) {
							t
									.addCommand(
											"mcePrint",
											function() {

												var pageName = $("#pageName")
														.val();
												var content = t.getContent();
												var arrSplit=content.split('</body>');
											//	console.log(arrSplit[0]);
												
												if (pageName == "IPD_Discharge") {
													var hospDetails = $(
															"#hospDetails")
															.html();
													hospDetails = eval('('
															+ hospDetails + ')');
													var hosp = hospDetails.listHosDetail[0];

													var rby = "";
													if ($("#refBy").val() == "undefined") {
														rby = "";
													} else {
														rby = $("#refBy").val();
													}

													var IPDDischarge = '<html><body><div style="width:25%;float:left;"><img src="'
															+ hosp.flpt
															+ '" width="200" height="150" alt="" /></div><div style="text-align: center;" id="SRBill"><h1>'
															+ hosp.hn
															+ '</h1>	<b>'
															+ hosp.ha
															+ '-'
															+ hosp.hz
															+ '</b><br></br> <b>Tel:-'
															+ hosp.hcon
															+ '.</b><b>Fax:-'
															+ hosp.hx
															+ '.</b></div></div>_______________________________________________________________________________________________<strong><h2>Discharge Summary</h2></strong><table cellpadding="0" cellspacing="0" style="border: solid 1px;" width="100%"><tr height="35px"><td  style="width: 20%;border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Name of the Patient</td>'
															+ '<td style="border: solid 1px;padding-left: 10px;" align="left" >'
															+ $("#patName")
																	.val()
															+ ' </td><td  width="20%" style="border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Reg. No.</td><td style="border: solid 1px;padding-left: 10px;" align="left" >'
															+ $("#regNo").val()
															+ ' </td></tr><tr height="35px"><td  style="border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Age</td><td style="border: solid 1px;padding-left: 10px;" align="left" >'
															+ $("#age").val()
															+ ' </td><td  style="border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Gender</td><td style="border: solid 1px;padding-left: 10px;" align="left" >'
															+ $("#sex").val()
															+ ' </td></tr><tr height="35px"><td  style="border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Date of Admission</td><td style="border: solid 1px;padding-left: 10px;" align="left" >'
															+ $("#admitDate")
																	.val()
															+ ' </td><td  style="border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Date of Discharge</td><td style="border: solid 1px;padding-left: 10px;" align="left" >&nbsp;'
															+ $(
																	"#dischargeDate")
																	.val()
															+ ' </td></tr><tr height="35px"><td  style="border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Incharge Dr./unit</td><td style="border: solid 1px;padding-left: 10px;" align="left" >'
															+ $("#inchargeDr")
																	.val()
															+ ' </td><td  style="border: solid 1px;padding-left: 10px;font-weight:bold;" align="left">Ref By:</td><td style="border: solid 1px;padding-left: 10px;" align="left" >'
															+ rby
															+ '</td></tr></table><table cellpadding="0" cellspacing="0" style=" padding-top: 20px;" width="100%"><tr><td style="border: solid 1px;" align="left" ><div style="width: 98%;padding: 1%;">'
															+ arrSplit[0]
															+ '</div> </td></tr></table><div style="width: 100%;padding-top:80px;"><div style="width: 20%;float:right;">Doctor Sign</div></div></body></html></body></html>';

													var head = "";
													head = head
															+ IPDDischarge;
												//	console.log(head);
													t.setContent(head);
												}

												t.getWin().print(), t
														.setContent(content);
											}), t.addButton("print", {
								title : "Print",
								cmd : "mcePrint"
							}), t.addShortcut("Ctrl+P", "", "mcePrint"), t
									.addMenuItem("print", {
										text : "Print",
										cmd : "mcePrint",
										icon : "print",
										shortcut : "Ctrl+P",
										context : "file"
									})
				});